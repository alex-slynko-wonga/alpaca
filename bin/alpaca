#!/usr/bin/env ruby
require 'gli'
require 'alpaca'

include GLI::App

program_desc 'Alpaca is a new build tool'

semver = File.join(Alpaca::LIB_DIR, '../.semver')
version Alpaca::Versioning.parse(semver).to_s

SLN = Alpaca::SolutionFactory
CONF = Alpaca::ConfigFactory
LOG = Alpaca::Log

subcommand_option_handling :normal
arguments :strict

Dir.glob(File.join(Alpaca::LIB_DIR, 'alpaca/commands/*.rb')) { |f| load f }

on_error do |exception|
  puts exception.backtrace
  true
end

exit run(ARGV)
